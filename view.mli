(* Takes the current map and updated state, returns an updated command
 *)
val update_map : map -> state -> map
